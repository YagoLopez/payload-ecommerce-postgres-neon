<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payload Ecommerce - Project Architecture</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .header h1 {
            color: #2c3e50;
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .header p {
            text-align: center;
            color: #7f8c8d;
            font-size: 1.2rem;
        }
        
        .diagram-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .diagram-section h2 {
            color: #2c3e50;
            font-size: 1.8rem;
            margin-bottom: 20px;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        
        .diagram-section p {
            color: #5a6c7d;
            margin-bottom: 20px;
            font-size: 1.1rem;
        }
        
        .mermaid {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid #e9ecef;
        }
        
        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .tech-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid #3498db;
        }
        
        .tech-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }
        
        .tech-card ul {
            list-style: none;
        }
        
        .tech-card li {
            color: #5a6c7d;
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }
        
        .tech-card li:before {
            content: "‚úÖ";
            position: absolute;
            left: 0;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin: 20px 0;
        }
        
        .feature-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            border-top: 4px solid #e74c3c;
        }
        
        .feature-card.store {
            border-top-color: #27ae60;
        }
        
        .feature-card.admin {
            border-top-color: #3498db;
        }
        
        .feature-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .feature-card ul {
            list-style: none;
        }
        
        .feature-card li {
            color: #5a6c7d;
            margin-bottom: 8px;
            padding-left: 25px;
            position: relative;
        }
        
        .feature-card.store li:before {
            content: "üõçÔ∏è";
            position: absolute;
            left: 0;
        }
        
        .feature-card.admin li:before {
            content: "‚öôÔ∏è";
            position: absolute;
            left: 0;
        }
        
        .footer {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            margin-top: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .nav-tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            padding: 5px;
            margin-bottom: 20px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        }
        
        .nav-tab {
            flex: 1;
            padding: 12px 20px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            color: #5a6c7d;
            transition: all 0.3s ease;
        }
        
        .nav-tab.active {
            background: #3498db;
            color: white;
            box-shadow: 0 2px 8px rgba(52, 152, 219, 0.3);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .download-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
        }
        
        .download-btn {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            margin: 10px;
        }
        
        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(39, 174, 96, 0.3);
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .container {
                padding: 10px;
            }
            
            .diagram-section {
                padding: 20px;
            }
            
            .tech-stack {
                grid-template-columns: 1fr;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ Payload Ecommerce Architecture</h1>
            <p>Comprehensive visual representation of the two main application parts</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('overview')">Overview</button>
            <button class="nav-tab" onclick="showTab('dataflow')">Data Flow</button>
            <button class="nav-tab" onclick="showTab('components')">Components</button>
            <button class="nav-tab" onclick="showTab('database')">Database</button>
        </div>

        <div id="overview" class="tab-content active">
            <div class="diagram-section">
                <h2>üèóÔ∏è High-Level Architecture</h2>
                <p>Overview of the complete system showing the two main applications and their interactions</p>
                <div class="mermaid">
graph TB
    subgraph "üåê Ecommerce Web Store"
        ES[Customer App]
        ES1[üõçÔ∏è Shop & Product Pages]
        ES2[üõí Shopping Cart & Checkout]
        ES3[üë§ Customer Account]
        ES4[üí≥ Stripe Payment]
        ES5[üì± Responsive UI Components]
    end
    
    subgraph "‚öôÔ∏è Admin Dashboard"
        AD[Admin App]
        AD1[üìä Product Management]
        AD2[üìù Content Management]
        AD3[üë• User Management]
        AD4[üìà Order Management]
        AD5[üóÇÔ∏è Media Library]
    end
    
    subgraph "üèóÔ∏è Core Infrastructure"
        DB[(PostgreSQL Database)]
        STORAGE[üóÑÔ∏è Vercel Blob Storage]
        AUTH[üîê Authentication System]
        API[üîå REST & GraphQL APIs]
        CACHE[‚ö° Caching Layer]
    end
    
    subgraph "üõ†Ô∏è Third-Party Services"
        STRIPE[üí∞ Stripe Payment]
        NEON[üóÑÔ∏è Neon Database]
        VERCEL[‚òÅÔ∏è Vercel Platform]
    end
    
    ES <--> AUTH
    ES <--> DB
    ES <--> STORAGE
    ES <--> STRIPE
    ES <--> API
    
    AD <--> AUTH
    AD <--> DB
    AD <--> STORAGE
    AD <--> API
    
    DB <--> NEON
    STORAGE <--> VERCEL
                </div>
            </div>
        </div>

        <div id="dataflow" class="tab-content">
            <div class="diagram-section">
                <h2>üîÑ Data Flow Architecture</h2>
                <p>How data flows through the system from user interactions to storage</p>
                <div class="mermaid">
flowchart LR
    subgraph "User Interactions"
        CUSTOMER[üë§ Customer] --> |Browse Products| STORE
        ADMIN[üë©‚Äçüíº Admin] --> |Manage Content| DASHBOARD
    end
    
    subgraph "Store Frontend"
        STORE --> |Add to Cart| CART
        CART --> |Checkout| CHECKOUT
        CHECKOUT --> |Process Payment| STRIPE
        STRIPE --> |Confirmation| CONFIRMATION
    end
    
    subgraph "Admin Interface"
        DASHBOARD --> |Create/Edit| PRODUCTS
        DASHBOARD --> |Manage| ORDERS
        DASHBOARD --> |Upload| MEDIA
    end
    
    subgraph "Data Layer"
        PRODUCTS <--> DB
        ORDERS <--> DB
        CART <--> DB
        MEDIA <--> STORAGE
        USERS <--> DB
    end
    
    DB --> |Persistent Storage| NEON
    STORAGE --> |File Storage| VERCEL
                </div>
            </div>
        </div>

        <div id="components" class="tab-content">
            <div class="diagram-section">
                <h2>üéØ Component Architecture</h2>
                <p>Detailed breakdown of components for both Ecommerce Store and Admin Dashboard</p>
                
                <h3>üõçÔ∏è Ecommerce Web Store</h3>
                <div class="mermaid">
graph TB
    subgraph "Frontend Layer"
        subgraph "Page Components"
            HOME[üè† Home Page]
            SHOP[üõçÔ∏è Shop Page]
            PRODUCT[üì¶ Product Detail]
            CART[üõí Cart Page]
            CHECKOUT[üí≥ Checkout Page]
            ACCOUNT[üë§ Account Pages]
        end
        
        subgraph "UI Components"
            HEADER[üß≠ Header/Navigation]
            FOOTER[üìÑ Footer]
            CAROUSEL[üé† Product Carousel]
            GRID[üìä Product Grid]
            FORMS[üìã Forms]
        end
        
        subgraph "Business Logic"
            CART_LOGIC[üõí Cart Management]
            PAYMENT[üí≥ Payment Processing]
            AUTH[üîê User Authentication]
            SEARCH[üîç Product Search]
        end
    end
    
    subgraph "State Management"
        PROVIDERS[üè¢ Context Providers]
        ECOM_PROVIDER[üõçÔ∏è Ecommerce Provider]
        AUTH_PROVIDER[üîê Auth Provider]
        THEME_PROVIDER[üé® Theme Provider]
    end
    
    HOME --> HEADER
    SHOP --> HEADER
    PRODUCT --> HEADER
    CART --> HEADER
    CHECKOUT --> HEADER
    ACCOUNT --> HEADER
    
    CART_LOGIC --> ECOM_PROVIDER
    PAYMENT --> ECOM_PROVIDER
    AUTH --> AUTH_PROVIDER
    SEARCH --> ECOM_PROVIDER
    
    PROVIDERS --> ECOM_PROVIDER
    PROVIDERS --> AUTH_PROVIDER
    PROVIDERS --> THEME_PROVIDER
                </div>

                <h3>‚öôÔ∏è Admin Dashboard</h3>
                <div class="mermaid">
graph TB
    subgraph "Admin Interface"
        subgraph "Collections"
            PRODUCTS_ADMIN[üì¶ Products]
            CATEGORIES_ADMIN[üè∑Ô∏è Categories]
            USERS_ADMIN[üë• Users]
            ORDERS_ADMIN[üìã Orders]
            MEDIA_ADMIN[üñºÔ∏è Media]
            PAGES_ADMIN[üìÑ Pages]
        end
        
        subgraph "Management Tools"
            CRUD[‚ö° CRUD Operations]
            PREVIEW[üëÅÔ∏è Live Preview]
            SEO[üîç SEO Management]
            INVENTORY[üìä Inventory Control]
        end
        
        subgraph "Admin Components"
            BEFORE_LOGIN[üö™ Before Login Screen]
            BEFORE_DASHBOARD[üè† Welcome Dashboard]
            ADMIN_BAR[üìä Admin Bar]
        end
    end
    
    PRODUCTS_ADMIN --> CRUD
    CATEGORIES_ADMIN --> CRUD
    USERS_ADMIN --> CRUD
    ORDERS_ADMIN --> CRUD
    MEDIA_ADMIN --> CRUD
    PAGES_ADMIN --> CRUD
    
    PRODUCTS_ADMIN --> INVENTORY
    PRODUCTS_ADMIN --> SEO
    PRODUCTS_ADMIN --> PREVIEW
    
    BEFORE_LOGIN --> ADMIN_BAR
    BEFORE_DASHBOARD --> ADMIN_BAR
                </div>
            </div>
        </div>

        <div id="database" class="tab-content">
            <div class="diagram-section">
                <h2>üóÑÔ∏è Database Schema</h2>
                <p>Entity relationship diagram showing the data model</p>
                <div class="mermaid">
erDiagram
    USERS ||--o{ ORDERS : places
    USERS ||--o{ CARTS : owns
    USERS ||--o{ ADDRESSES : has
    PRODUCTS ||--o{ PRODUCT_VARIANTS : has
    PRODUCTS ||--o{ CART_ITEMS : contains
    CATEGORIES ||--o{ PRODUCTS : categorizes
    ORDERS ||--o{ TRANSACTIONS : includes
    MEDIA ||--o{ PRODUCTS : gallery
    VARIANT_TYPES ||--o{ VARIANT_OPTIONS : defines
    
    USERS {
        string id PK
        string email
        string password
        string name
        datetime createdAt
        datetime updatedAt
    }
    
    PRODUCTS {
        string id PK
        string title
        string slug
        number priceInUSD
        boolean enableVariants
        object inventory
        object meta
        string status
    }
    
    ORDERS {
        string id PK
        string customerId FK
        object items
        number total
        string status
        datetime createdAt
    }
    
    CARTS {
        string id PK
        string customerId FK
        object items
        number subtotal
        string status
    }
    
    CATEGORIES {
        string id PK
        string title
        string slug
        string description
    }
                </div>
            </div>
        </div>

        <div class="features-grid">
            <div class="feature-card store">
                <h3>üõçÔ∏è Ecommerce Web Store Features</h3>
                <ul>
                    <li>Product Catalog with categories and variants</li>
                    <li>Shopping Cart with persistent storage</li>
                    <li>Secure Checkout with Stripe integration</li>
                    <li>User Authentication and account management</li>
                    <li>Order History and tracking</li>
                    <li>Responsive Design for all devices</li>
                    <li>SEO Optimized with meta tags</li>
                    <li>Live Preview functionality</li>
                </ul>
            </div>
            
            <div class="feature-card admin">
                <h3>‚öôÔ∏è Admin Dashboard Features</h3>
                <ul>
                    <li>Content Management for all entities</li>
                    <li>Product Management with variants</li>
                    <li>Order Management and processing</li>
                    <li>User Management with roles</li>
                    <li>Media Library management</li>
                    <li>SEO Management tools</li>
                    <li>Live Preview for content</li>
                    <li>Inventory Tracking</li>
                </ul>
            </div>
        </div>

        <div class="tech-stack">
            <div class="tech-card">
                <h3>üé® Frontend Technologies</h3>
                <ul>
                    <li>Next.js 15 - React framework with App Router</li>
                    <li>React 19 - UI library</li>
                    <li>TypeScript - Type safety</li>
                    <li>Tailwind CSS 4 - Styling framework</li>
                    <li>Radix UI - Component primitives</li>
                    <li>Lucide React - Icon library</li>
                </ul>
            </div>
            
            <div class="tech-card">
                <h3>üèóÔ∏è Backend & CMS</h3>
                <ul>
                    <li>Payload CMS 3.59 - Headless CMS</li>
                    <li>PostgreSQL - Primary database (Neon hosting)</li>
                    <li>Vercel Blob Storage - Media storage</li>
                    <li>Stripe - Payment processing</li>
                    <li>GraphQL - API layer</li>
                    <li>REST APIs - Additional endpoints</li>
                </ul>
            </div>
            
            <div class="tech-card">
                <h3>üõ†Ô∏è Development Tools</h3>
                <ul>
                    <li>TypeScript - Type checking</li>
                    <li>ESLint - Code linting</li>
                    <li>Prettier - Code formatting</li>
                    <li>Playwright - E2E testing</li>
                    <li>Vitest - Unit testing</li>
                    <li>Git - Version control</li>
                </ul>
            </div>
        </div>

        <div class="download-section">
            <h3>üìã Documentation Download</h3>
            <p>Download the complete architecture documentation</p>
            <a href="./project-architecture.md" class="download-btn" download>
                üìÑ Download Markdown
            </a>
            <a href="#" class="download-btn" onclick="printArchitecture()">
                üñ®Ô∏è Print This Page
            </a>
        </div>

        <div class="footer">
            <p>üöÄ Built with Payload CMS, Next.js 15, and modern web technologies</p>
            <p>üìä Generated architecture documentation for the Ecommerce project</p>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            securityLevel: 'loose',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });

        function showTab(tabId) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => {
                content.classList.remove('active');
            });
            
            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(tabId).classList.add('active');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
            
            // Re-render mermaid diagrams for the active tab
            setTimeout(() => {
                mermaid.run();
            }, 100);
        }

        function printArchitecture() {
            window.print();
        }

        // Initialize first tab as active
        document.addEventListener('DOMContentLoaded', function() {
            showTab('overview');
        });
    </script>
</body>
</html>
